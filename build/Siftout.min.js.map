{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///Siftout.min.js","webpack:///webpack/bootstrap cbe746e5084de6091c21","webpack:///./app/src/Siftout.js"],"names":["root","factory","exports","module","define","amd","this","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","prototype","DEFAULT_OPTIONS","gridElement","document","getElementById","filterElement","itemSelector","columns","columnGap","rowGap","transition","GRID_CSS","position","perspective","perspectiveOrigin","backfaceVisibility","HIDDEN_CSS","opacity","pointerEvents","transform","VISIBLE_CSS","ITEM_CSS","lineHeight","display","top","left","Siftout","customOptions","opt","assign","items","matrix","colWidth","offsetWidth","rowsMaxHeights","maxWidth","width","init","value","loadItems","applyStyles","buildMatrix","arrangeItems","bindFilters","querySelectorAll","groups","Array","from","map","col","forEach","item","classList","remove","undefined","filter","itemGroups","getAttribute","split","group","trim","commonGroups","itemGroup","indexOf","hiddenItems","add","isNaN","push","_this","iCol","iItem","itemId","YPos","done","prevHeight","prevRowMaxHeight","style","updateGridHeight","css","_this2","prop","newFilters","splitTransform","oldFilters","uneditedFilters","oldFilter","newFilter","substr","finalFilters","reduce","a","b","string","slice","iRow","Math","floor","parseInt","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","keys","Symbol","iterator","next","offsetHeight","err","return","highestCol","aItemsHeight","total","val","bItemsHeight","height","_this3","filterItems","addEventListener","e","preventDefault"],"mappings":"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","file":"Siftout.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"Siftout\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Siftout\"] = factory();\n\telse\n\t\troot[\"Siftout\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"Siftout\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Siftout\"] = factory();\n\telse\n\t\troot[\"Siftout\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar DEFAULT_OPTIONS = {\n\t  gridElement: document.getElementById('siftout-grid'),\n\t  filterElement: document.getElementById('siftout-filter'),\n\t  itemSelector: '.siftout-item',\n\t  columns: 4,\n\t  columnGap: 50,\n\t  rowGap: 50,\n\t  transition: '375ms ease-out'\n\t},\n\t    GRID_CSS = {\n\t  position: 'relative',\n\t  perspective: '1000px',\n\t  perspectiveOrigin: 'center center',\n\t  backfaceVisibility: 'hidden'\n\t},\n\t    HIDDEN_CSS = {\n\t  opacity: 0,\n\t  pointerEvents: 'none',\n\t  transform: 'translateZ(-1000px)'\n\t},\n\t    VISIBLE_CSS = {\n\t  opacity: 1,\n\t  pointerEvents: 'auto',\n\t  transform: 'translateZ(0px)'\n\t};\n\t\n\tvar ITEM_CSS = {\n\t  lineHeight: 0,\n\t  display: 'inline-block',\n\t  position: 'absolute',\n\t  top: 0,\n\t  left: 0,\n\t  pointerEvents: 'auto',\n\t  transform: 'translateZ(0px)'\n\t};\n\t\n\tmodule.exports = function () {\n\t  function Siftout(customOptions) {\n\t    _classCallCheck(this, Siftout);\n\t\n\t    this.opt = Object.assign(DEFAULT_OPTIONS, customOptions);\n\t    this.items = null;\n\t    this.matrix = null;\n\t    this.colWidth = (this.opt.gridElement.offsetWidth - this.opt.columnGap * (this.opt.columns - 1)) / this.opt.columns;\n\t    this.rowsMaxHeights = {};\n\t\n\t    ITEM_CSS.maxWidth = this.colWidth + 'px';\n\t    ITEM_CSS.width = this.colWidth + 'px';\n\t    ITEM_CSS.transition = this.opt.transition;\n\t\n\t    this.init();\n\t  }\n\t\n\t  _createClass(Siftout, [{\n\t    key: 'init',\n\t    value: function init() {\n\t      this.loadItems();\n\t      this.applyStyles(this.opt.gridElement, GRID_CSS);\n\t      this.applyStyles(this.items, ITEM_CSS);\n\t      this.buildMatrix();\n\t      this.arrangeItems();\n\t      this.bindFilters();\n\t    }\n\t  }, {\n\t    key: 'loadItems',\n\t    value: function loadItems() {\n\t      this.items = this.opt.gridElement.querySelectorAll(this.opt.itemSelector);\n\t    }\n\t  }, {\n\t    key: 'buildMatrix',\n\t    value: function buildMatrix(groups) {\n\t      this.matrix = Array.from(Array(this.opt.columns)).map(function (col) {\n\t        return [];\n\t      });\n\t      var items = null;\n\t      Array.from(this.items).forEach(function (item) {\n\t        return item.classList.remove('active');\n\t      });\n\t\n\t      if (groups !== undefined) {\n\t        items = Array.from(this.items).filter(function (item) {\n\t          var itemGroups = item.getAttribute('data-group').split(',').map(function (group) {\n\t            return group.trim();\n\t          }),\n\t              commonGroups = itemGroups.filter(function (itemGroup) {\n\t            return groups.indexOf(itemGroup) != -1;\n\t          });\n\t\n\t          return commonGroups.length > 0;\n\t        });\n\t\n\t        var hiddenItems = Array.from(this.items).filter(function (item) {\n\t          return items.indexOf(item) == -1;\n\t        });\n\t        this.applyStyles(hiddenItems, HIDDEN_CSS);\n\t      } else {\n\t        items = this.items;\n\t      }\n\t\n\t      Array.from(items).forEach(function (item) {\n\t        return item.classList.add('active');\n\t      });\n\t\n\t      for (var i in items) {\n\t        if (!isNaN(i)) {\n\t          this.matrix[i % this.opt.columns].push({\n\t            item: items[i],\n\t            id: i\n\t          });\n\t        }\n\t      }\n\t    }\n\t  }, {\n\t    key: 'arrangeItems',\n\t    value: function arrangeItems() {\n\t      var _this = this;\n\t\n\t      this.rowsMaxHeights = {};\n\t      this.matrix.forEach(function (col, iCol) {\n\t        col.forEach(function (item, iItem) {\n\t          var itemId = item.id,\n\t              YPos = 0,\n\t              done = false;\n\t\n\t          while (!done) {\n\t            var prevHeight = _this.prevRowMaxHeight(itemId);\n\t\n\t            YPos += prevHeight;\n\t            if (itemId >= _this.opt.columns) {\n\t              YPos += _this.opt.rowGap;\n\t            }\n\t\n\t            itemId -= _this.opt.columns;\n\t\n\t            if (!prevHeight > 0) {\n\t              done = true;\n\t            }\n\t          }\n\t          item.item.style['transform'] = 'translateX(' + (iCol * _this.colWidth + iCol * _this.opt.columnGap) + 'px) translateY(' + YPos + 'px)';\n\t        });\n\t        _this.applyStyles(col.map(function (item) {\n\t          return item.item;\n\t        }), VISIBLE_CSS);\n\t      });\n\t\n\t      this.updateGridHeight();\n\t    }\n\t  }, {\n\t    key: 'applyStyles',\n\t    value: function applyStyles(items, css) {\n\t      var _this2 = this;\n\t\n\t      if (items.length === undefined) items = Array(items);\n\t\n\t      Array.from(items).forEach(function (item, i) {\n\t        for (var prop in css) {\n\t          if (prop !== 'transform' || item.style[prop] === '') {\n\t            item.style[prop] = css[prop];\n\t          } else {\n\t            (function () {\n\t              var newFilters = _this2.splitTransform(css.transform),\n\t                  oldFilters = _this2.splitTransform(item.style.transform);\n\t\n\t              var uneditedFilters = oldFilters.filter(function (oldFilter) {\n\t                return newFilters.filter(function (newFilter) {\n\t                  return oldFilter.substr(0, oldFilter.indexOf('(')) === newFilter.substr(0, newFilter.indexOf('('));\n\t                }).length === 0;\n\t              });\n\t\n\t              var finalFilters = newFilters.reduce(function (a, b) {\n\t                return a + ' ' + b;\n\t              });\n\t              if (uneditedFilters.length > 0) {\n\t                finalFilters += ' ' + uneditedFilters.reduce(function (a, b) {\n\t                  return a + ' ' + b;\n\t                });\n\t              }\n\t\n\t              if (item.style.transform != finalFilters) {\n\t                item.style.transform = finalFilters;\n\t              }\n\t            })();\n\t          }\n\t        }\n\t      });\n\t    }\n\t  }, {\n\t    key: 'splitTransform',\n\t    value: function splitTransform(string) {\n\t      return string.split(/[)] /g).map(function (string) {\n\t        return string.trim() + (string.slice(-1) != ')' ? ')' : '');\n\t      });\n\t    }\n\t  }, {\n\t    key: 'prevRowMaxHeight',\n\t    value: function prevRowMaxHeight(itemId) {\n\t      var iRow = Math.floor(parseInt(itemId) / this.opt.columns);\n\t\n\t      if (iRow === 0) {\n\t        return 0;\n\t      } else {\n\t        iRow -= 1;\n\t      }\n\t\n\t      if (this.rowsMaxHeights[iRow] === undefined) {\n\t        var _iteratorNormalCompletion = true;\n\t        var _didIteratorError = false;\n\t        var _iteratorError = undefined;\n\t\n\t        try {\n\t          for (var _iterator = Array(this.opt.columns).keys()[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t            var i = _step.value;\n\t\n\t            if (this.matrix[i][iRow] !== undefined) {\n\t              if (this.rowsMaxHeights[iRow] === undefined) {\n\t                this.rowsMaxHeights[iRow] = this.matrix[i][iRow].item.offsetHeight;\n\t              } else if (this.matrix[i][iRow].item.offsetHeight > this.rowsMaxHeights[iRow]) {\n\t                this.rowsMaxHeights[iRow] = this.matrix[i][iRow].item.offsetHeight;\n\t              }\n\t            }\n\t          }\n\t        } catch (err) {\n\t          _didIteratorError = true;\n\t          _iteratorError = err;\n\t        } finally {\n\t          try {\n\t            if (!_iteratorNormalCompletion && _iterator.return) {\n\t              _iterator.return();\n\t            }\n\t          } finally {\n\t            if (_didIteratorError) {\n\t              throw _iteratorError;\n\t            }\n\t          }\n\t        }\n\t      }\n\t\n\t      return this.rowsMaxHeights[iRow];\n\t    }\n\t  }, {\n\t    key: 'updateGridHeight',\n\t    value: function updateGridHeight() {\n\t      var highestCol = Array.from(this.matrix).reduce(function (a, b) {\n\t        if (a.length === b.length) {\n\t          var aItemsHeight = a.reduce(function (total, val) {\n\t            return total + val.item.offsetHeight;\n\t          }, 0),\n\t              bItemsHeight = b.reduce(function (total, val) {\n\t            return total + val.item.offsetHeight;\n\t          }, 0);\n\t\n\t          return aItemsHeight > bItemsHeight ? a : b;\n\t        } else {\n\t          return a.length > b.length ? a : b;\n\t        }\n\t      });\n\t\n\t      var height = highestCol.slice(-1)[0].item.offsetHeight;\n\t      for (var iRow in this.rowsMaxHeights) {\n\t        height += this.rowsMaxHeights[iRow];\n\t      }\n\t\n\t      this.opt.gridElement.style.height = height + (highestCol.length - 1) * this.opt.rowGap + 'px';\n\t    }\n\t  }, {\n\t    key: 'bindFilters',\n\t    value: function bindFilters() {\n\t      var _this3 = this;\n\t\n\t      var filterItems = Array.from(this.opt.filterElement.querySelectorAll('[data-group]'));\n\t\n\t      filterItems.forEach(function (item) {\n\t        item.addEventListener('click', function (e) {\n\t          filterItems.forEach(function (item) {\n\t            return item.classList.remove('active');\n\t          });\n\t          e.target.classList.add('active');\n\t          e.preventDefault();\n\t          var groups = e.target.getAttribute('data-group').split(',').map(function (group) {\n\t            return group.trim();\n\t          });\n\t          _this3.buildMatrix(groups);\n\t          _this3.arrangeItems();\n\t        });\n\t      });\n\t    }\n\t  }]);\n\t\n\t  return Siftout;\n\t}();\n\n/***/ }\n/******/ ])\n});\n;\n\n\n// WEBPACK FOOTER //\n// Siftout.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap cbe746e5084de6091c21","const\r\nDEFAULT_OPTIONS = {\r\n  gridElement: document.getElementById('siftout-grid'),\r\n  filterElement: document.getElementById('siftout-filter'),\r\n  itemSelector: '.siftout-item',\r\n  columns: 4,\r\n  columnGap: 50,\r\n  rowGap: 50,\r\n  transition: '375ms ease-out'\r\n},\r\nGRID_CSS = {\r\n  position: 'relative',\r\n  perspective: '1000px',\r\n  perspectiveOrigin: 'center center',\r\n  backfaceVisibility: 'hidden'\r\n},\r\nHIDDEN_CSS = {\r\n  opacity: 0,\r\n  pointerEvents: 'none',\r\n  transform: 'translateZ(-1000px)'\r\n},\r\nVISIBLE_CSS = {\r\n  opacity: 1,\r\n  pointerEvents: 'auto',\r\n  transform: 'translateZ(0px)'\r\n}\r\n\r\nlet ITEM_CSS = {\r\n  lineHeight: 0,\r\n  display: 'inline-block',\r\n  position: 'absolute',\r\n  top: 0,\r\n  left: 0,\r\n  pointerEvents: 'auto',\r\n  transform: 'translateZ(0px)'\r\n}\r\n\r\n\r\nmodule.exports = class Siftout {\r\n  \r\n  constructor(customOptions) {\r\n    this.opt = Object.assign(DEFAULT_OPTIONS, customOptions)\r\n    this.items = null\r\n    this.matrix = null\r\n    this.colWidth = ((this.opt.gridElement.offsetWidth - (this.opt.columnGap * (this.opt.columns - 1))) / this.opt.columns)\r\n    this.rowsMaxHeights = {}\r\n    \r\n    ITEM_CSS.maxWidth = this.colWidth + 'px'\r\n    ITEM_CSS.width = this.colWidth + 'px'\r\n    ITEM_CSS.transition = this.opt.transition\r\n\r\n    this.init()\r\n  }\r\n\r\n  init(){\r\n    this.loadItems()\r\n    this.applyStyles(this.opt.gridElement, GRID_CSS)\r\n    this.applyStyles(this.items, ITEM_CSS)\r\n    this.buildMatrix()\r\n    this.arrangeItems()\r\n    this.bindFilters()\r\n  }\r\n  \r\n  loadItems(){\r\n    this.items = this.opt.gridElement.querySelectorAll(this.opt.itemSelector)\r\n  }\r\n  \r\n  buildMatrix(groups){\r\n    this.matrix = Array.from(Array(this.opt.columns)).map(col => [])\r\n    let items = null\r\n    Array.from(this.items).forEach(item => item.classList.remove('active'))\r\n    \r\n    if (groups !== undefined){\r\n      items = Array.from(this.items).filter(item => {\r\n        let itemGroups = item.getAttribute('data-group').split(',').map(group => group.trim()),\r\n            commonGroups = itemGroups.filter(itemGroup => groups.indexOf(itemGroup) != -1)\r\n            \r\n        return commonGroups.length > 0\r\n      })\r\n      \r\n      let hiddenItems = Array.from(this.items).filter(item => items.indexOf(item) == -1)\r\n      this.applyStyles(hiddenItems, HIDDEN_CSS)\r\n    } else {\r\n      items = this.items\r\n    }\r\n    \r\n    Array.from(items).forEach(item => item.classList.add('active'))\r\n    \r\n    for(let i in items){\r\n      if (!isNaN(i)) {\r\n        this.matrix[i % this.opt.columns].push({\r\n          item:items[i],\r\n          id: i\r\n        })\r\n      }\r\n    }\r\n  }\r\n  \r\n  arrangeItems(){\r\n    this.rowsMaxHeights = {}\r\n    this.matrix.forEach((col, iCol) => {\r\n      col.forEach((item, iItem) => {\r\n        let itemId = item.id,\r\n            YPos = 0,\r\n            done = false\r\n        \r\n        while (!done) {\r\n          let prevHeight = this.prevRowMaxHeight(itemId)\r\n          \r\n          YPos += prevHeight\r\n          if (itemId >= this.opt.columns){\r\n            YPos += this.opt.rowGap\r\n          }\r\n          \r\n          itemId -= this.opt.columns\r\n          \r\n          if (!prevHeight > 0){\r\n            done = true\r\n          }\r\n        }\r\n        item.item.style['transform'] = 'translateX('+(iCol * this.colWidth + iCol * this.opt.columnGap)+'px) translateY('+YPos+'px)'\r\n      })\r\n      this.applyStyles(col.map(item => item.item), VISIBLE_CSS)\r\n    })\r\n    \r\n    this.updateGridHeight()\r\n  }\r\n  \r\n  applyStyles(items, css){\r\n    if (items.length === undefined)\r\n      items = Array(items)\r\n    \r\n    Array.from(items).forEach((item, i) => {\r\n      for (let prop in css) {\r\n        if (prop !== 'transform' || item.style[prop] === '') {\r\n          item.style[prop] = css[prop]\r\n        } else {\r\n          let newFilters = this.splitTransform(css.transform),\r\n              oldFilters = this.splitTransform(item.style.transform)\r\n              \r\n          let uneditedFilters = oldFilters.filter(oldFilter =>\r\n            newFilters.filter(newFilter =>\r\n              oldFilter.substr(0, oldFilter.indexOf('(')) === newFilter.substr(0, newFilter.indexOf('('))\r\n            ).length === 0\r\n          )\r\n          \r\n          let finalFilters = newFilters.reduce((a, b) => a+' '+b)\r\n          if (uneditedFilters.length > 0) {\r\n            finalFilters += ' '+uneditedFilters.reduce((a, b) => a+' '+b)\r\n          }\r\n          \r\n          if(item.style.transform != finalFilters){\r\n            item.style.transform = finalFilters\r\n          }\r\n          \r\n        }\r\n      }\r\n    })\r\n  }\r\n  \r\n  splitTransform(string){\r\n    return string.split(/[)] /g).map(string => {\r\n       return string.trim() + ( string.slice(-1) != ')' ? ')' : '' )\r\n    })\r\n  }\r\n  \r\n  prevRowMaxHeight(itemId){\r\n    let iRow = Math.floor(parseInt(itemId) / this.opt.columns)\r\n    \r\n    if (iRow === 0) {\r\n      return 0\r\n    } else {\r\n      iRow -= 1\r\n    }\r\n    \r\n    if (this.rowsMaxHeights[iRow] === undefined){\r\n      for (let i of Array(this.opt.columns).keys()){\r\n        if (this.matrix[i][iRow] !== undefined){\r\n          if(this.rowsMaxHeights[iRow] === undefined){\r\n            this.rowsMaxHeights[iRow] = this.matrix[i][iRow].item.offsetHeight\r\n          } else if (this.matrix[i][iRow].item.offsetHeight > this.rowsMaxHeights[iRow]){\r\n            this.rowsMaxHeights[iRow] = this.matrix[i][iRow].item.offsetHeight\r\n          }\r\n        }\r\n      }\r\n    }\r\n    \r\n    return this.rowsMaxHeights[iRow]\r\n  }\r\n  \r\n  updateGridHeight(){\r\n    let highestCol = Array.from(this.matrix).reduce((a, b) => {\r\n      if(a.length === b.length){\r\n        let aItemsHeight = a.reduce((total, val) => total + val.item.offsetHeight, 0),\r\n            bItemsHeight = b.reduce((total, val) => total + val.item.offsetHeight, 0)\r\n        \r\n        return aItemsHeight > bItemsHeight ? a : b\r\n      } else {\r\n        return a.length > b.length ? a : b\r\n      }\r\n    })\r\n    \r\n    let height = highestCol.slice(-1)[0].item.offsetHeight\r\n    for (let iRow in this.rowsMaxHeights){\r\n      height += this.rowsMaxHeights[iRow]\r\n    }\r\n    \r\n    this.opt.gridElement.style.height = height + ((highestCol.length - 1) * this.opt.rowGap) + 'px'\r\n  }\r\n  \r\n  bindFilters(){\r\n    let filterItems = Array.from(this.opt.filterElement.querySelectorAll('[data-group]'))\r\n    \r\n    filterItems.forEach(item => {\r\n      item.addEventListener('click', e => {\r\n        filterItems.forEach(item => item.classList.remove('active'))\r\n        e.target.classList.add('active')\r\n        e.preventDefault()\r\n        let groups = e.target.getAttribute('data-group').split(',').map(group => group.trim())\r\n        this.buildMatrix(groups)\r\n        this.arrangeItems()\r\n      })\r\n    })\r\n  }\r\n  \r\n}\n\n\n// WEBPACK FOOTER //\n// ./app/src/Siftout.js"],"sourceRoot":""}